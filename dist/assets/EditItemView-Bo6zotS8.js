import{f as T,u as U,C as k,D as N,s as D,g as M,G as R,k as F,o as g,c as H,a as t,w as o,d as r,H as L,m as j,l as A,B as G,W as I,b as w,n as c,e as J,E as K,I as O,J as P,K as W,L as $,M as q,N as z,O as Q,v as X}from"./index-Bo4L7-t_.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                 *//* empty css                           */import{u as Y,U as Z}from"./items-DUGhBesS.js";import"./timestamp_pb-CFeAd6Js.js";const ee={class:"items-edit"},te=w("br",null,null,-1),oe=w("br",null,null,-1),ue=T({__name:"EditItemView",setup(ae){const d=U(),_=Y(),p=k(),V=N(),{loading:E}=D(d),f=M("/games"),e=R({name:"",armyTypeId:"",points:0,description:"",story:""}),v=async function(){const m=new Z({id:p.params.id,name:e.name,points:BigInt(e.points),description:e.description,story:e.story}),a=await _.updateItem(m);if(a){c.error(a);return}c.success("successfully updated item"),V.push(`${f.value}/items`)};async function y(){d.loading=!0;const[m,a]=await _.getItem(p.params.gameid,p.params.id);if(a){c.error(a);return}const s=m;e.name=s.name,e.armyTypeId=s.armyTypeId,e.points=Number(s.points),e.description=s.description,e.story=s.story,e.armyTypeId.length>0&&(f.value="/army-types"),d.loading=!1}return F(async()=>{await y()}),(m,a)=>{const s=J,B=K,u=O,i=P,l=W,b=$,x=q,C=z,h=Q,S=X;return g(),H("div",ee,[t(B,{separator:"/"},{default:o(()=>[t(s,{to:{path:"/"}},{default:o(()=>[r("Homepage")]),_:1}),t(s,{to:{path:"/games/items"}},{default:o(()=>[r("Items")]),_:1}),t(s,null,{default:o(()=>[r(L(e.name),1)]),_:1})]),_:1}),te,oe,t(h,{class:"row-bg",justify:"space-between"},{default:o(()=>[t(u,{span:4}),t(u,{span:10},{default:o(()=>[t(C,null,{default:o(()=>[j((g(),G(x,{model:e,"label-width":"auto",style:{"max-height":"600px"}},{default:o(()=>[t(l,{label:"Item Name"},{default:o(()=>[t(i,{modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=n=>e.name=n)},null,8,["modelValue"])]),_:1}),t(l,{label:"Points"},{default:o(()=>[t(i,{modelValue:e.points,"onUpdate:modelValue":a[1]||(a[1]=n=>e.points=n),type:"number",min:"0"},null,8,["modelValue"])]),_:1}),t(l,{label:"Description"},{default:o(()=>[t(i,{modelValue:e.description,"onUpdate:modelValue":a[2]||(a[2]=n=>e.description=n),rows:2,type:"textarea"},null,8,["modelValue"])]),_:1}),t(l,{label:"Story"},{default:o(()=>[t(i,{modelValue:e.story,"onUpdate:modelValue":a[3]||(a[3]=n=>e.story=n),rows:4,type:"textarea"},null,8,["modelValue"])]),_:1}),t(l,null,{default:o(()=>[t(b,{type:"primary",onClick:I(v,["prevent"])},{default:o(()=>[r("Save")]),_:1}),t(b,{onClick:I(y,["prevent"])},{default:o(()=>[r("Cancel")]),_:1})]),_:1})]),_:1},8,["model"])),[[S,A(E)]])]),_:1})]),_:1}),t(u,{span:4})]),_:1})])}}});export{ue as default};
