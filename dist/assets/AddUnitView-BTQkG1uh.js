var ot=Object.defineProperty;var ct=(c,s,t)=>s in c?ot(c,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[s]=t;var n=(c,s,t)=>(ct(c,typeof s!="symbol"?s+"":s,t),t);import{N as h,P as a,O as x,Q as b,R as lt,S as mt,T as ut,u as X,f as dt,z as pt,C as yt,s as ft,r as O,D as Tt,g as gt,j as N,o as F,c as H,a as r,w as o,d as P,i as K,A as wt,h as Jt,y as Q,p as kt,q as Bt,b as Y,e as ht,E as It,G as St,x as Ut,H as bt,J as xt,K as vt,L as Nt,M as Pt,v as Mt,t as At}from"./index-DuBop9t4.js";/* empty css                     *//* empty css               *//* empty css                *//* empty css                 *//* empty css                  *//* empty css                           */import{U as M,D as Ft,u as Wt}from"./userArmies-CGtMzVZB.js";import"./timestamp_pb-DtOAgJG7.js";const u=class u extends h{constructor(t){super();n(this,"JWT","");n(this,"armyTypeId","");a.util.initPartial(t,this)}static fromBinary(t,e){return new u().fromBinary(t,e)}static fromJson(t,e){return new u().fromJson(t,e)}static fromJsonString(t,e){return new u().fromJsonString(t,e)}static equals(t,e){return a.util.equals(u,t,e)}};n(u,"runtime",a),n(u,"typeName","unittypes.ArmyTypeIdRequest"),n(u,"fields",a.util.newFieldList(()=>[{no:1,name:"JWT",kind:"scalar",T:9},{no:2,name:"armyTypeId",kind:"scalar",T:9}]));let W=u;const d=class d extends h{constructor(t){super();n(this,"unitTypes",[]);a.util.initPartial(t,this)}static fromBinary(t,e){return new d().fromBinary(t,e)}static fromJson(t,e){return new d().fromJson(t,e)}static fromJsonString(t,e){return new d().fromJsonString(t,e)}static equals(t,e){return a.util.equals(d,t,e)}};n(d,"runtime",a),n(d,"typeName","unittypes.ArmyTypeIdReply"),n(d,"fields",a.util.newFieldList(()=>[{no:1,name:"unitTypes",kind:"message",T:M,repeated:!0}]));let V=d;const p=class p extends h{constructor(t){super();n(this,"JWT","");n(this,"id","");a.util.initPartial(t,this)}static fromBinary(t,e){return new p().fromBinary(t,e)}static fromJson(t,e){return new p().fromJson(t,e)}static fromJsonString(t,e){return new p().fromJsonString(t,e)}static equals(t,e){return a.util.equals(p,t,e)}};n(p,"runtime",a),n(p,"typeName","unittypes.GetUnitTypeRequest"),n(p,"fields",a.util.newFieldList(()=>[{no:1,name:"JWT",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9}]));let z=p;const y=class y extends h{constructor(t){super();n(this,"JWT","");n(this,"armyTypeId","");n(this,"limit",x.zero);n(this,"offset",x.zero);n(this,"includeUnitTypeOptions",!1);a.util.initPartial(t,this)}static fromBinary(t,e){return new y().fromBinary(t,e)}static fromJson(t,e){return new y().fromJson(t,e)}static fromJsonString(t,e){return new y().fromJsonString(t,e)}static equals(t,e){return a.util.equals(y,t,e)}};n(y,"runtime",a),n(y,"typeName","unittypes.GetUnitTypesRequest"),n(y,"fields",a.util.newFieldList(()=>[{no:1,name:"JWT",kind:"scalar",T:9},{no:2,name:"armyTypeId",kind:"scalar",T:9},{no:3,name:"limit",kind:"scalar",T:3},{no:4,name:"offset",kind:"scalar",T:3},{no:5,name:"includeUnitTypeOptions",kind:"scalar",T:8}]));let L=y;const f=class f extends h{constructor(t){super();n(this,"unitTypes",[]);n(this,"count",x.zero);a.util.initPartial(t,this)}static fromBinary(t,e){return new f().fromBinary(t,e)}static fromJson(t,e){return new f().fromJson(t,e)}static fromJsonString(t,e){return new f().fromJsonString(t,e)}static equals(t,e){return a.util.equals(f,t,e)}};n(f,"runtime",a),n(f,"typeName","unittypes.GetUnitTypesReply"),n(f,"fields",a.util.newFieldList(()=>[{no:1,name:"unitTypes",kind:"message",T:M,repeated:!0},{no:2,name:"count",kind:"scalar",T:3}]));let $=f;const T=class T extends h{constructor(t){super();n(this,"JWT","");n(this,"name","");n(this,"gameId","");n(this,"armyTypeId","");n(this,"troopTypeId","");n(this,"compositionTypeId","");n(this,"pointsPerModel",x.zero);n(this,"minModels",x.zero);n(this,"maxModels",x.zero);n(this,"unitTypeId","");a.util.initPartial(t,this)}static fromBinary(t,e){return new T().fromBinary(t,e)}static fromJson(t,e){return new T().fromJson(t,e)}static fromJsonString(t,e){return new T().fromJsonString(t,e)}static equals(t,e){return a.util.equals(T,t,e)}};n(T,"runtime",a),n(T,"typeName","unittypes.CreateUnitTypeRequest"),n(T,"fields",a.util.newFieldList(()=>[{no:1,name:"JWT",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"gameId",kind:"scalar",T:9},{no:4,name:"armyTypeId",kind:"scalar",T:9},{no:5,name:"troopTypeId",kind:"scalar",T:9},{no:6,name:"compositionTypeId",kind:"scalar",T:9},{no:7,name:"pointsPerModel",kind:"scalar",T:3},{no:8,name:"minModels",kind:"scalar",T:3},{no:9,name:"maxModels",kind:"scalar",T:3},{no:10,name:"unitTypeId",kind:"scalar",T:9}]));let _=T;const g=class g extends h{constructor(t){super();n(this,"JWT","");n(this,"id","");n(this,"name","");n(this,"troopTypeId","");n(this,"compositionTypeId","");a.util.initPartial(t,this)}static fromBinary(t,e){return new g().fromBinary(t,e)}static fromJson(t,e){return new g().fromJson(t,e)}static fromJsonString(t,e){return new g().fromJsonString(t,e)}static equals(t,e){return a.util.equals(g,t,e)}};n(g,"runtime",a),n(g,"typeName","unittypes.UpdateUnitTypeRequest"),n(g,"fields",a.util.newFieldList(()=>[{no:1,name:"JWT",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"troopTypeId",kind:"scalar",T:9},{no:5,name:"compositionTypeId",kind:"scalar",T:9}]));let C=g;const w=class w extends h{constructor(s){super(),a.util.initPartial(s,this)}static fromBinary(s,t){return new w().fromBinary(s,t)}static fromJson(s,t){return new w().fromJson(s,t)}static fromJsonString(s,t){return new w().fromJsonString(s,t)}static equals(s,t){return a.util.equals(w,s,t)}};n(w,"runtime",a),n(w,"typeName","unittypes.EmptyReply"),n(w,"fields",a.util.newFieldList(()=>[]));let q=w;const Lt={typeName:"unittypes.V1UnitTypes",methods:{getUnitTypes:{name:"GetUnitTypes",I:L,O:$,kind:b.Unary},getUnitType:{name:"GetUnitType",I:z,O:M,kind:b.Unary},createUnitType:{name:"CreateUnitType",I:_,O:M,kind:b.Unary},updateUnitType:{name:"UpdateUnitType",I:C,O:M,kind:b.Unary},deleteUnitType:{name:"DeleteUnitType",I:Ft,O:q,kind:b.Unary},getBasicUnitTypesByArmyTypeID:{name:"GetBasicUnitTypesByArmyTypeID",I:W,O:V,kind:b.Unary}}},D=lt(Lt,ut),_t=mt("unitTypes",()=>{const c=X();async function s(J,m,i){return console.log("attempting to get unit types"),new Promise(k=>{D.getUnitTypes(new L({armyTypeId:J,limit:BigInt(m),offset:BigInt(i>1?(i-1)*m:0),JWT:c.getToken()})).then(U=>{const v=U;k([v.unitTypes,Number(v.count),void 0])}).catch(U=>{console.table(U),k([void 0,0,"unable to get unit games"])})})}async function t(J,m){return new Promise(i=>{D.createUnitType(new _({armyTypeId:J,name:m,JWT:c.getToken()})).then(()=>{i(void 0)}).catch(k=>{console.table(k),i("unable to create a new unit type")})})}async function e(J){return new Promise(m=>{D.getBasicUnitTypesByArmyTypeID(new W({armyTypeId:J,JWT:c.getToken()})).then(i=>m([i.unitTypes,void 0])).catch(i=>{console.table(i),m([void 0,"unable to get unit type names by army type id"])})})}return{getUnitTypes:s,createUnitType:t,getUnitTypeNamesFromArmyTypeId:e}}),Et={class:"user-armies-add-unit"},Ot=Y("br",null,null,-1),Dt=Y("br",null,null,-1),Yt=dt({__name:"AddUnitView",setup(c){const s=pt(),t=X(),e=_t(),J=Wt(),m=yt(),{loading:i}=ft(t),k=O([]),U=O(""),v=O(""),A=Tt({unit_type_id:""});async function Z(){N.info("Attempting to add a unit to an army..."),i.value=!0;const I=await J.addUnitToUserArmy(s.params.id,A.unit_type_id);if(i.value=!1,I){N.error(I);return}N.success("Successfully added unit to army"),m.push({path:`/user-armies/edit/${s.params.id}`})}async function G(){const[I,B]=await e.getUnitTypeNamesFromArmyTypeId(v.value);if(B){N.error(B);return}k.value=I}return gt(async()=>{const[I,B]=await J.getUserArmy(s.params.id);if(B){N.error(B);return}const S=I;U.value=S.name,v.value=S.armyTypeId,await G()}),(I,B)=>{const S=ht,R=It,E=St,tt=At,et=Ut,j=bt,nt=xt,at=vt,st=Nt,rt=Pt,it=Mt;return F(),H("div",Et,[r(R,{separator:"/"},{default:o(()=>[r(S,{to:{path:"/"}},{default:o(()=>[P("Homepage")]),_:1}),r(S,{to:{path:"/user-armies"}},{default:o(()=>[P("User Armies")]),_:1}),r(S,{to:{path:`/user-armies/edit/${K(s).params.id}`}},{default:o(()=>[P(wt(U.value),1)]),_:1},8,["to"]),r(S,null,{default:o(()=>[P("Add Unit")]),_:1})]),_:1}),Ot,Dt,r(rt,{class:"row-bg",justify:"space-between"},{default:o(()=>[r(E,{span:4}),r(E,{span:10},{default:o(()=>[r(st,null,{default:o(()=>[Jt((F(),Q(at,{model:A,"label-width":"auto",style:{"max-height":"600px"}},{default:o(()=>[r(j,{label:"Unit Type"},{default:o(()=>[r(et,{modelValue:A.unit_type_id,"onUpdate:modelValue":B[0]||(B[0]=l=>A.unit_type_id=l),placeholder:"please select your unit type"},{default:o(()=>[(F(!0),H(kt,null,Bt(k.value,l=>(F(),Q(tt,{key:l.id,label:`${l.compositionTypeName} - ${l.name} - (${l.pointsPerModel*l.minModels}pts${l.maxModels>1?" per model (min:"+l.minModels+")":""})`,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(j,null,{default:o(()=>[r(nt,{type:"primary",onClick:Z},{default:o(()=>[P("Add")]),_:1})]),_:1})]),_:1},8,["model"])),[[it,K(i)]])]),_:1})]),_:1}),r(E,{span:4})]),_:1})])}}});export{Yt as default};
