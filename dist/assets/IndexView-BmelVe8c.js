import{f as K,u as P,s as H,g as n,F as f,a as e,h as x,i as M,d as r,X as F,j as _,k as L,o as d,c as v,b as k,w as o,y as E,m as O,l as $,n as g,e as j,z as q,A as X,E as J,q as Q,t as W,v as Y,B as S}from"./index-Bo4L7-t_.js";/* empty css                   *//* empty css                *//* empty css                     *//* empty css                           *//* empty css                 *//* empty css                  */import{u as Z}from"./games-Bw-fpxRZ.js";import{u as ee}from"./armyTypes-V-LEmafu.js";import{u as te}from"./unitTypes-sI2a_SDX.js";import"./timestamp_pb-CFeAd6Js.js";import"./types_pb-DoulQPha.js";const ae={class:"unit-type-index"},le={class:"troop-types"},oe={style:{height:"1000px"}},ge=K({__name:"IndexView",setup(se){const s=P(),V=Z(),D=ee(),I=te(),{loading:B}=H(s),u=n([]),p=n([]),h=n([]),m=n(""),c=n(""),N=n([{key:"id",dataKey:"id",width:300,title:"ID"},{key:"name",dataKey:"name",width:500,title:"Name"},{key:"compositionTypeName",dataKey:"compositionTypeName",width:200,title:"Composition Type",fixed:f.RIGHT},{key:"pointsPerModel",dataKey:"pointsPerModel",width:100,title:"Pts per model",fixed:f.RIGHT},{dataKey:"id",width:200,fixed:f.RIGHT,title:"Options",cellRenderer:l=>e(_,null,[e(x,{underline:!1,icon:M,href:`/unit-types/edit/${l.cellData}`},{default:()=>[r("Edit")]}),e(x,{style:"padding-left:10px",underline:!1,icon:F,href:`/unit-types/destroy/${l.cellData}`},{default:()=>[r("Delete")]})])}]);async function A(){s.loading=!0;const[l,,t]=await V.getGames(1e3,0);if(t){g.error(t);return}u.value=l,u.value.length>0&&(m.value=u.value[0].id),s.loading=!1}async function T(){s.loading=!0;const[l,,t]=await D.getArmyTypes(m.value,1e3,0);if(t){g.error(t);return}p.value=l,p.value.length>0&&(c.value=p.value[0].id),s.loading=!1}async function w(){s.loading=!0;const[l,,t]=await I.getUnitTypes(c.value,1e3,0);if(t){g.error(t);return}h.value=l,s.loading=!1,console.log(l)}return L(async()=>{await A(),await T(),await w()}),(l,t)=>{const i=j,y=q,b=X,C=J,G=Q,R=W,U=Y;return d(),v("div",ae,[k("div",le,[e(C,{separator:"/"},{default:o(()=>[e(i,{to:{path:"/"}},{default:o(()=>[r("Homepage")]),_:1}),e(i,{to:{path:"/games"}},{default:o(()=>[e(b,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=a),placeholder:"Select",size:"small",style:{"min-width":"200px"},onChange:T},{default:o(()=>[e(y,{key:"",label:"",value:"-- Please select a game --"}),(d(!0),v(_,null,E(u.value,a=>(d(),S(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{to:{path:"/army-types"}},{default:o(()=>[e(b,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),placeholder:"Select",size:"small",style:{"min-width":"200px"},onChange:w},{default:o(()=>[e(y,{key:"",label:"",value:"-- Please select an army type --"}),(d(!0),v(_,null,E(p.value,a=>(d(),S(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:o(()=>[r("Unit Types")]),_:1}),e(i,{to:{path:"/unit-types/create"}},{default:o(()=>[r("Create New")]),_:1})]),_:1})]),k("div",oe,[e(R,null,{default:o(({height:a,width:z})=>[O(e(G,{columns:N.value,data:h.value,width:z,height:a,fixed:""},null,8,["columns","data","width","height"]),[[U,$(B)]])]),_:1})])])}}});export{ge as default};
