import{g as P,u as $,I as q,h as z,s as H,i as x,J as L,m as j,F as G,a as e,j as U,k as O,d as i,Y as Q,l as J,o as k,c as Y,w as a,K as W,q as g,n as p,H as X,p as h,_ as Z,b as c,t as w,e as ee,E as te,L as ae,M as le,N as se,O as ne,P as oe,Q as ie,y as re,z as ue,A as de,x as N}from"./index-DBH5ZCFA.js";/* empty css                   *//* empty css                *//* empty css                     *//* empty css               *//* empty css                *//* empty css                 *//* empty css                           */import{u as me}from"./userArmies-CaQybnd6.js";/* empty css                  */import"./types_pb-5n_e-kCd.js";import"./timestamp_pb-hl9xnwuy.js";const pe={class:"user-armies-edit"},ce=c("br",null,null,-1),_e=c("br",null,null,-1),ye=c("br",null,null,-1),fe=c("br",null,null,-1),be={style:{height:"1000px"}},Re=P({__name:"EditView",setup(ge){const y=$(),_=q(),v=z(),T=me(),{loading:r}=H(y),f=x(0),t=L({name:"",points:0,gameName:"",armyTypeName:"",units:[]});async function A(){r.value=!0;const o=await T.updateUserArmy(_.params.id,t.name,t.points);if(r.value=!1,o){w.error(o);return}w.success("successfully updated army!"),v.push("/user-armies")}async function C(){r.value=!0,await V(),r.value=!1}async function V(){y.loading=!0;const[o,l]=await T.getUserArmy(_.params.id);if(l){w.error(l);return}const s=o;for(let d=0;d<s.units.length;d++)f.value+=Number(s.units[d].points);t.name=s.name,t.points=Number(s.points),t.gameName=s.gameName,t.armyTypeName=s.armyTypeName,t.units=s.units,y.loading=!1}async function R(){v.push(`/user-armies/edit/${_.params.id}/add-unit`)}j(async()=>{await V()});const B=x([{key:"compositionTypeName",dataKey:"unitType.compositionTypeName",width:300,title:"Type"},{key:"name",dataKey:"unitType.name",width:300,title:"Unit Name"},{key:"quantity",dataKey:"quantity",width:80,title:"Qty"},{key:"points",dataKey:"points",width:80,title:"Points"},{key:"troopTypeName",dataKey:"unitType.troopTypeName",width:300,title:"Troop Type"},{dataKey:"id",width:200,fixed:G.RIGHT,title:"Options",cellRenderer:o=>e(J,null,[e(U,{underline:!1,icon:O,href:`/user-armies/edit/${_.params.id}/unit/${o.cellData}`},{default:()=>[i("Edit")]}),e(U,{style:"padding-left:10px",underline:!1,icon:Q,href:`/user-armies/unit/destroy/${o.cellData}`},{default:()=>[i("Delete")]})])}]);return(o,l)=>{const s=ee,d=te,b=ae,m=le,u=se,D=ne,K=oe,S=ie,F=re,I=ue,E=de;return k(),Y("div",pe,[e(d,{separator:"/"},{default:a(()=>[e(s,{to:{path:"/"}},{default:a(()=>[i("Homepage")]),_:1}),e(s,{to:{path:"/user-armies"}},{default:a(()=>[i("User Armies")]),_:1}),e(s,null,{default:a(()=>[i("Edit "+W(t.name),1)]),_:1})]),_:1}),ce,_e,e(S,{class:"row-bg",justify:"space-between"},{default:a(()=>[e(b,{span:4}),e(b,{span:10},{default:a(()=>[e(K,null,{default:a(()=>[g((k(),X(D,{model:t,"label-width":"auto",style:{"max-height":"600px"}},{default:a(()=>[e(u,{label:"Army Name"},{default:a(()=>[e(m,{modelValue:t.name,"onUpdate:modelValue":l[0]||(l[0]=n=>t.name=n)},null,8,["modelValue"])]),_:1}),e(u,{label:"Game"},{default:a(()=>[e(m,{modelValue:t.gameName,"onUpdate:modelValue":l[1]||(l[1]=n=>t.gameName=n),disabled:""},null,8,["modelValue"])]),_:1}),e(u,{label:"Army Type"},{default:a(()=>[e(m,{modelValue:t.armyTypeName,"onUpdate:modelValue":l[2]||(l[2]=n=>t.armyTypeName=n),disabled:""},null,8,["modelValue"])]),_:1}),e(u,{label:"Max Points"},{default:a(()=>[e(m,{modelValue:t.points,"onUpdate:modelValue":l[3]||(l[3]=n=>t.points=n),type:"number"},null,8,["modelValue"])]),_:1}),e(u,{label:"Used Points"},{default:a(()=>[e(m,{modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=n=>f.value=n),type:"number",disabled:""},null,8,["modelValue"])]),_:1}),e(u,null,{default:a(()=>[e(p(N),{type:"primary",onClick:h(A,["prevent"])},{default:a(()=>[i("Save")]),_:1}),e(p(N),{type:"success",onClick:h(R,["prevent"])},{default:a(()=>[i("Add Unit")]),_:1}),e(p(N),{type:"warning",onClick:h(C,["prevent"])},{default:a(()=>[i("Reset")]),_:1})]),_:1})]),_:1},8,["model"])),[[E,p(r)]])]),_:1})]),_:1}),e(b,{span:4})]),_:1}),ye,fe,g(c("div",be,[e(I,null,{default:a(({height:n,width:M})=>[g(e(F,{columns:B.value,data:t.units,width:M,height:n,fixed:""},null,8,["columns","data","width","height"]),[[E,p(r)]])]),_:1})],512),[[Z,t.units.length>0]])])}}});export{Re as default};
