import{f as L,u as F,s as M,r as s,F as y,a as e,p as _,m as P,n as O,d as f,g as U,o as d,c as v,b,w as o,q as k,h as $,i as j,j as g,e as q,t as J,x as Q,E as W,k as X,l as Y,v as Z,y as A}from"./index-BQqGihlM.js";/* empty css                   *//* empty css                    *//* empty css                     *//* empty css                           *//* empty css                 *//* empty css                  */import{u as ee}from"./games-DP7faEik.js";import{u as te}from"./items-BOZMZR27.js";import{u as ae}from"./armyTypes-BZCSL8-V.js";/* empty css                */import"./timestamp_pb-CTfFuloM.js";const le={class:"items-index"},se={class:"items"},oe={style:{height:"1000px"}},he=L({__name:"ArmyItemsIndexView",setup(ne){const n=F(),E=ee(),S=ae(),V=te(),{loading:D}=M(n),i=s([]),r=s([]),h=s([]),u=s(""),G=s(""),m=s(""),w=s(""),N=s([{key:"itemTypeName",dataKey:"itemTypeName",width:150,title:"Item Type"},{key:"name",dataKey:"name",width:500,title:"Name"},{key:"points",dataKey:"points",width:60,fixed:y.RIGHT,title:"Pts"},{key:"armyTypeId",dataKey:"armyTypeId",width:100,fixed:y.RIGHT,title:"Is Army Item",cellRenderer:l=>e(_,null,[e("p",{innerHTML:l.cellData.length>0?"*":""},null)])},{key:"description",dataKey:"description",width:300,fixed:y.RIGHT,title:"Description"},{dataKey:"id",width:200,fixed:y.RIGHT,title:"Options",cellRenderer:l=>e(_,null,[e(P,{underline:!1,icon:O,href:`/games/${l.rowData.gameId}/items/${l.cellData}`},{default:()=>[f("Edit")]})])}]);async function R(){n.loading=!0;const[l,,t]=await E.getGames(500,0);if(t){g.error(t);return}i.value=l,i.value.length>0&&(u.value=i.value[0].id,G.value=i.value[0].name),m.value="",w.value="",n.loading=!1}async function T(){n.loading=!0;const[l,,t]=await S.getArmyTypes(u.value,500,0);if(t){g.error(t);return}r.value=l,r.value.length>0&&(m.value=r.value[0].id,w.value=r.value[0].name),n.loading=!1,I()}async function I(){n.loading=!0;const[l,t]=await V.getArmyItems(m.value,1e4,0);if(t){g.error(t);return}h.value=l,n.loading=!1}return U(async()=>{await R(),await T()}),(l,t)=>{const c=q,p=J,x=Q,B=W,H=X,K=Y,z=Z;return d(),v("div",le,[b("div",se,[e(B,{separator:"/"},{default:o(()=>[e(c,{to:{path:"/"}},{default:o(()=>[f("Homepage")]),_:1}),e(c,{to:{path:"/games"}},{default:o(()=>[e(x,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),placeholder:"Select",size:"small",style:{"min-width":"200px"},onChange:T},{default:o(()=>[e(p,{key:"",label:"",value:"-- Please select a game --"}),(d(!0),v(_,null,k(i.value,a=>(d(),A(p,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{to:{path:"/army-types"}},{default:o(()=>[e(x,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=a=>m.value=a),placeholder:"Select",size:"small",style:{"min-width":"200px"},onChange:I},{default:o(()=>[e(p,{key:"",label:"",value:"-- Please select an army type --"}),(d(!0),v(_,null,k(r.value,a=>(d(),A(p,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:o(()=>[f("Army Items")]),_:1})]),_:1})]),b("div",oe,[e(K,null,{default:o(({height:a,width:C})=>[$(e(H,{columns:N.value,data:h.value,width:C,height:a,fixed:""},null,8,["columns","data","width","height"]),[[z,j(D)]])]),_:1})])])}}});export{he as default};
