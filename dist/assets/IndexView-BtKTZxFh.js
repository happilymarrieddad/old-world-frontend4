import{f as P,u as z,s as H,r as n,F as f,a as e,m as b,n as M,d as r,U as F,p as _,g as L,o as d,c as v,b as k,w as o,q as E,h as O,i as $,j as g,e as j,t as q,x as J,E as Q,k as W,l as X,v as Y,y as S}from"./index-CuHrO1UT.js";/* empty css                   *//* empty css                    *//* empty css                     *//* empty css                           *//* empty css                 *//* empty css                  *//* empty css                */import{u as Z}from"./games-C5MyWv6x.js";import{u as ee}from"./armyTypes-DYqyAicj.js";import{u as te}from"./unitTypes-bP-PZcfW.js";import"./timestamp_pb-B3iL3wgR.js";import"./types_pb-D0t3hVCi.js";const ae={class:"unit-type-index"},le={class:"troop-types"},oe={style:{height:"1000px"}},he=P({__name:"IndexView",setup(se){const s=z(),V=Z(),D=ee(),I=te(),{loading:N}=H(s),u=n([]),p=n([]),h=n([]),m=n(""),c=n(""),U=n([{key:"id",dataKey:"id",width:300,title:"ID"},{key:"name",dataKey:"name",width:500,title:"Name"},{key:"compositionTypeName",dataKey:"compositionTypeName",width:200,title:"Composition Type",fixed:f.RIGHT},{key:"pointsPerModel",dataKey:"pointsPerModel",width:100,title:"Pts per model",fixed:f.RIGHT},{dataKey:"id",width:200,fixed:f.RIGHT,title:"Options",cellRenderer:l=>e(_,null,[e(b,{underline:!1,icon:M,href:`/unit-types/edit/${l.cellData}`},{default:()=>[r("Edit")]}),e(b,{style:"padding-left:10px",underline:!1,icon:F,href:`/unit-types/destroy/${l.cellData}`},{default:()=>[r("Delete")]})])}]);async function B(){s.loading=!0;const[l,,t]=await V.getGames(1e3,0);if(t){g.error(t);return}u.value=l,u.value.length>0&&(m.value=u.value[0].id),s.loading=!1}async function T(){s.loading=!0;const[l,,t]=await D.getArmyTypes(m.value,1e3,0);if(t){g.error(t);return}p.value=l,p.value.length>0&&(c.value=p.value[0].id),s.loading=!1}async function w(){s.loading=!0;const[l,,t]=await I.getUnitTypes(c.value,1e3,0);if(t){g.error(t);return}h.value=l,s.loading=!1,console.log(l)}return L(async()=>{await B(),await T(),await w()}),(l,t)=>{const i=j,y=q,x=J,C=Q,G=W,R=X,A=Y;return d(),v("div",ae,[k("div",le,[e(C,{separator:"/"},{default:o(()=>[e(i,{to:{path:"/"}},{default:o(()=>[r("Homepage")]),_:1}),e(i,{to:{path:"/games"}},{default:o(()=>[e(x,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=a),placeholder:"Select",size:"small",style:{"min-width":"200px"},onChange:T},{default:o(()=>[e(y,{key:"",label:"",value:"-- Please select a game --"}),(d(!0),v(_,null,E(u.value,a=>(d(),S(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{to:{path:"/army-types"}},{default:o(()=>[e(x,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),placeholder:"Select",size:"small",style:{"min-width":"200px"},onChange:w},{default:o(()=>[e(y,{key:"",label:"",value:"-- Please select an army type --"}),(d(!0),v(_,null,E(p.value,a=>(d(),S(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:o(()=>[r("Unit Types")]),_:1}),e(i,{to:{path:"/unit-types/create"}},{default:o(()=>[r("Create New")]),_:1})]),_:1})]),k("div",oe,[e(R,null,{default:o(({height:a,width:K})=>[O(e(G,{columns:U.value,data:h.value,width:K,height:a,fixed:""},null,8,["columns","data","width","height"]),[[A,$(N)]])]),_:1})])])}}});export{he as default};
