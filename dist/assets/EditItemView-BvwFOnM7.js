import{g as T,u as U,I as N,h as k,s as D,i as M,J as R,m as A,o as g,c as F,a as t,w as o,d as r,K as H,q as L,n as P,H as j,p as I,b as w,t as c,e as q,E as J,L as K,M as O,N as Q,x as $,O as z,P as G,Q as W,A as X}from"./index-DBH5ZCFA.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                           */import{u as Y,U as Z}from"./items-jHotVz_3.js";import"./timestamp_pb-hl9xnwuy.js";const ee={class:"items-edit"},te=w("br",null,null,-1),oe=w("br",null,null,-1),ce=T({__name:"EditItemView",setup(ae){const p=U(),_=Y(),d=N(),V=k(),{loading:E}=D(p),f=M("/games"),e=R({name:"",armyTypeId:"",points:0,description:"",story:""}),v=async function(){const m=new Z({id:d.params.id,name:e.name,points:BigInt(e.points),description:e.description,story:e.story}),a=await _.updateItem(m);if(a){c.error(a);return}c.success("successfully updated item"),V.push(`${f.value}/items`)};async function y(){p.loading=!0;const[m,a]=await _.getItem(d.params.gameid,d.params.id);if(a){c.error(a);return}const s=m;e.name=s.name,e.armyTypeId=s.armyTypeId,e.points=Number(s.points),e.description=s.description,e.story=s.story,e.armyTypeId.length>0&&(f.value="/army-types"),p.loading=!1}return A(async()=>{await y()}),(m,a)=>{const s=q,x=J,u=K,i=O,l=Q,b=$,h=z,B=G,C=W,S=X;return g(),F("div",ee,[t(x,{separator:"/"},{default:o(()=>[t(s,{to:{path:"/"}},{default:o(()=>[r("Homepage")]),_:1}),t(s,{to:{path:"/games/items"}},{default:o(()=>[r("Items")]),_:1}),t(s,null,{default:o(()=>[r(H(e.name),1)]),_:1})]),_:1}),te,oe,t(C,{class:"row-bg",justify:"space-between"},{default:o(()=>[t(u,{span:4}),t(u,{span:10},{default:o(()=>[t(B,null,{default:o(()=>[L((g(),j(h,{model:e,"label-width":"auto",style:{"max-height":"600px"}},{default:o(()=>[t(l,{label:"Item Name"},{default:o(()=>[t(i,{modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=n=>e.name=n)},null,8,["modelValue"])]),_:1}),t(l,{label:"Points"},{default:o(()=>[t(i,{modelValue:e.points,"onUpdate:modelValue":a[1]||(a[1]=n=>e.points=n),type:"number",min:"0"},null,8,["modelValue"])]),_:1}),t(l,{label:"Description"},{default:o(()=>[t(i,{modelValue:e.description,"onUpdate:modelValue":a[2]||(a[2]=n=>e.description=n),rows:2,type:"textarea"},null,8,["modelValue"])]),_:1}),t(l,{label:"Story"},{default:o(()=>[t(i,{modelValue:e.story,"onUpdate:modelValue":a[3]||(a[3]=n=>e.story=n),rows:4,type:"textarea"},null,8,["modelValue"])]),_:1}),t(l,null,{default:o(()=>[t(b,{type:"primary",onClick:I(v,["prevent"])},{default:o(()=>[r("Save")]),_:1}),t(b,{onClick:I(y,["prevent"])},{default:o(()=>[r("Cancel")]),_:1})]),_:1})]),_:1},8,["model"])),[[S,P(E)]])]),_:1})]),_:1}),t(u,{span:4})]),_:1})])}}});export{ce as default};
