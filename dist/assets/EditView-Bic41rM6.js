import{g as M,I as U,h as q,u as I,s as D,i as F,J as g,m as P,o as y,c as A,a as e,w as a,d as m,q as H,n as L,H as T,b,t as r,e as j,E as J,L as O,M as Q,N as $,x as z,O as G,P as K,Q as W,A as X}from"./index-NHNacFVT.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                           */import{u as Y,U as Z}from"./statistics-iwFOdJHg.js";import"./timestamp_pb-DpX4yl5v.js";const ee={class:"statistics-update-view"},te=b("br",null,null,-1),ae=b("br",null,null,-1),pe=M({__name:"EditView",setup(se){const d=U(),h=q(),l=I(),p=Y(),{loading:w}=D(l),_=F(),s=g({name:"",display:""}),S=g({name:[{required:!0,message:"Please input a name",trigger:"blur"},{min:3,max:100,message:"Name length should at least be 3 chars long",trigger:"blur"}],display:[{required:!0,message:"Please input a display value",trigger:"change"},{min:1,max:100,message:"Name length should at least be 1 chars long",trigger:"change"}]});async function v(){l.loading=!0;const o=await p.updateStatistic(new Z({id:d.params.id,name:s.name,display:s.display}));if(o){l.loading=!1,r.error(o);return}l.loading=!1,r.success("Successfully updated the statistic"),h.push("/games/statistics")}const E=async o=>{o&&await o.validate((t,n)=>{t?v():(console.log(n),r.error("invalid form"))})};async function V(){l.loading=!0;const[o,t]=await p.getStatistic(d.params.id);if(t){l.loading=!1,r.error(t);return}const n=o;s.name=n.name,s.display=n.display,l.loading=!1}return P(async()=>{await V()}),(o,t)=>{const n=j,x=J,u=O,f=Q,c=$,N=z,B=G,R=K,k=W,C=X;return y(),A("div",ee,[e(x,{separator:"/"},{default:a(()=>[e(n,{to:{path:"/"}},{default:a(()=>[m("Homepage")]),_:1}),e(n,{to:{path:"/statistics"}},{default:a(()=>[m("Statistics")]),_:1})]),_:1}),te,ae,e(k,{class:"row-bg",justify:"space-between"},{default:a(()=>[e(u,{span:4}),e(u,{span:10},{default:a(()=>[e(R,null,{default:a(()=>[H((y(),T(B,{ref_key:"formRef",ref:_,rules:S,model:s,"label-width":"auto",style:{"max-height":"600px"},"status-icon":""},{default:a(()=>[e(c,{label:"Statistic Name",prop:"name"},{default:a(()=>[e(f,{modelValue:s.name,"onUpdate:modelValue":t[0]||(t[0]=i=>s.name=i),placeholder:"Movement"},null,8,["modelValue"])]),_:1}),e(c,{label:"New Statistic Display Value",prop:"display"},{default:a(()=>[e(f,{modelValue:s.display,"onUpdate:modelValue":t[1]||(t[1]=i=>s.display=i),placeholder:"M"},null,8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(N,{type:"primary",onClick:t[2]||(t[2]=i=>E(_.value))},{default:a(()=>[m("Update")]),_:1})]),_:1})]),_:1},8,["rules","model"])),[[C,L(w)]])]),_:1})]),_:1}),e(u,{span:4})]),_:1})])}}});export{pe as default};
