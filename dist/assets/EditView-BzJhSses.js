import{f as $,u as z,z as G,A as H,s as L,r as E,B as P,g as j,F as J,a as e,m as U,n as O,d as i,U as q,p as Q,o as x,c as W,w as a,C as X,h as b,i as p,y as Y,T as h,V as Z,b as c,j as g,e as ee,E as te,D as ae,G as le,H as se,J as ne,K as oe,L as ie,k as re,l as ue,v as me,I as w}from"./index-BQqGihlM.js";/* empty css                   *//* empty css                    *//* empty css                     *//* empty css               *//* empty css                *//* empty css                 *//* empty css                           */import{u as de}from"./userArmies-DetI65OZ.js";/* empty css                */import"./timestamp_pb-CTfFuloM.js";const pe={class:"user-armies-edit"},ce=c("br",null,null,-1),_e=c("br",null,null,-1),ye=c("br",null,null,-1),fe=c("br",null,null,-1),be={style:{height:"1000px"}},Ce=$({__name:"EditView",setup(he){const k=z(),_=G(),v=H(),N=de(),{loading:r}=L(k),y=E(0),t=P({name:"",points:0,gameName:"",armyTypeName:"",units:[]});async function A(){r.value=!0;const o=await N.updateUserArmy(_.params.id,t.name,t.points);if(r.value=!1,o){g.error(o);return}g.success("successfully updated army!"),v.push("/user-armies")}async function C(){r.value=!0,await T(),r.value=!1}async function T(){const[o,l]=await N.getUserArmy(_.params.id);if(l){g.error(l);return}const s=o;for(let m=0;m<s.units.length;m++)y.value+=Number(s.units[m].points);t.name=s.name,t.points=Number(s.points),t.gameName=s.gameName,t.armyTypeName=s.armyTypeName,t.units=s.units}async function B(){v.push(`/user-armies/edit/${_.params.id}/add-unit`)}j(async()=>{await T()});const D=E([{key:"compositionTypeName",dataKey:"unitType.compositionTypeName",width:300,title:"Type"},{key:"name",dataKey:"unitType.name",width:300,title:"Unit Name"},{key:"points",dataKey:"points",width:80,title:"Points"},{key:"troopTypeName",dataKey:"unitType.troopTypeName",width:300,title:"Troop Type"},{dataKey:"id",width:200,fixed:J.RIGHT,title:"Options",cellRenderer:o=>e(Q,null,[e(U,{underline:!1,icon:O,href:`/user-armies/edit/${_.params.id}/unit/${o.cellData}`},{default:()=>[i("Edit")]}),e(U,{style:"padding-left:10px",underline:!1,icon:q,href:`/user-armies/unit/destroy/${o.cellData}`},{default:()=>[i("Delete")]})])}]);return(o,l)=>{const s=ee,m=te,f=ae,d=le,u=se,R=ne,S=oe,K=ie,F=re,I=ue,V=me;return x(),W("div",pe,[e(m,{separator:"/"},{default:a(()=>[e(s,{to:{path:"/"}},{default:a(()=>[i("Homepage")]),_:1}),e(s,{to:{path:"/user-armies"}},{default:a(()=>[i("User Armies")]),_:1}),e(s,null,{default:a(()=>[i("Edit "+X(t.name),1)]),_:1})]),_:1}),ce,_e,e(K,{class:"row-bg",justify:"space-between"},{default:a(()=>[e(f,{span:4}),e(f,{span:10},{default:a(()=>[e(S,null,{default:a(()=>[b((x(),Y(R,{model:t,"label-width":"auto",style:{"max-height":"600px"}},{default:a(()=>[e(u,{label:"Army Name"},{default:a(()=>[e(d,{modelValue:t.name,"onUpdate:modelValue":l[0]||(l[0]=n=>t.name=n)},null,8,["modelValue"])]),_:1}),e(u,{label:"Game"},{default:a(()=>[e(d,{modelValue:t.gameName,"onUpdate:modelValue":l[1]||(l[1]=n=>t.gameName=n),disabled:""},null,8,["modelValue"])]),_:1}),e(u,{label:"Army Type"},{default:a(()=>[e(d,{modelValue:t.armyTypeName,"onUpdate:modelValue":l[2]||(l[2]=n=>t.armyTypeName=n),disabled:""},null,8,["modelValue"])]),_:1}),e(u,{label:"Max Points"},{default:a(()=>[e(d,{modelValue:t.points,"onUpdate:modelValue":l[3]||(l[3]=n=>t.points=n),type:"number"},null,8,["modelValue"])]),_:1}),e(u,{label:"Used Points"},{default:a(()=>[e(d,{modelValue:y.value,"onUpdate:modelValue":l[4]||(l[4]=n=>y.value=n),type:"number",disabled:""},null,8,["modelValue"])]),_:1}),e(u,null,{default:a(()=>[e(p(w),{type:"primary",onClick:h(A,["prevent"])},{default:a(()=>[i("Save")]),_:1}),e(p(w),{type:"success",onClick:h(B,["prevent"])},{default:a(()=>[i("Add Unit")]),_:1}),e(p(w),{type:"warning",onClick:h(C,["prevent"])},{default:a(()=>[i("Reset")]),_:1})]),_:1})]),_:1},8,["model"])),[[V,p(r)]])]),_:1})]),_:1}),e(f,{span:4})]),_:1}),ye,fe,b(c("div",be,[e(I,null,{default:a(({height:n,width:M})=>[b(e(F,{columns:D.value,data:t.units,width:M,height:n,fixed:""},null,8,["columns","data","width","height"]),[[V,p(r)]])]),_:1})],512),[[Z,t.units.length>0]])])}}});export{Ce as default};
