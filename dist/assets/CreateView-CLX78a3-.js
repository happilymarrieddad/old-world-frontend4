import{f as L,u as R,C as j,s as H,r as I,D as $,g as q,o as n,c as y,a as e,w as t,d as u,h as J,i as K,y as f,p as E,q as T,b as A,j as d,e as O,E as P,G as z,x as Q,H as W,I as X,J as Y,K as Z,L as ee,M as ae,v as te,t as oe}from"./index-DuBop9t4.js";/* empty css                     *//* empty css               *//* empty css                *//* empty css                 *//* empty css                  *//* empty css                           */import{u as le}from"./userArmies-CGtMzVZB.js";import{u as re}from"./games-Biqdm4kf.js";import{u as se}from"./armyTypes-XZXiAt3J.js";import"./timestamp_pb-DtOAgJG7.js";const ne={class:"user-armies-create"},me=A("br",null,null,-1),ue=A("br",null,null,-1),Ie=L({__name:"CreateView",setup(de){const h=R(),C=re(),S=se(),x=le(),B=j(),{loading:c}=H(h),i=I([]),p=I([]),o=$({gameId:"",armyTypeId:"",name:"",points:0});async function U(){d.info("Attempting to create an army..."),c.value=!0;const[r,a]=await x.createUserArmy(o.name,o.gameId,o.armyTypeId,o.points);if(c.value=!1,a){d.error(a);return}const s=r;d.success(`Successfully created army '${s.name}'. Navigating to army edit page`),B.push({path:`/user-armies/edit/${s.id}`})}async function k(){const[r,,a]=await C.getGames(500,0);if(a){d.error(a);return}i.value=r,i.value.length>0&&(o.gameId=i.value[0].id)}async function g(){const[r,,a]=await S.getArmyTypes(o.gameId,500,0);if(a){d.error(a);return}p.value=r,p.value.length>0&&(o.armyTypeId=p.value[0].id)}return q(async()=>{await k(),await g()}),(r,a)=>{const s=O,G=P,_=z,b=oe,v=Q,m=W,V=X,w=Y,N=Z,D=ee,M=ae,F=te;return n(),y("div",ne,[e(G,{separator:"/"},{default:t(()=>[e(s,{to:{path:"/"}},{default:t(()=>[u("Homepage")]),_:1}),e(s,{to:{path:"/user-armies"}},{default:t(()=>[u("User Armies")]),_:1}),e(s,null,{default:t(()=>[u("Create new army")]),_:1})]),_:1}),me,ue,e(M,{class:"row-bg",justify:"space-between"},{default:t(()=>[e(_,{span:4}),e(_,{span:10},{default:t(()=>[e(D,null,{default:t(()=>[J((n(),f(N,{model:o,"label-width":"auto",style:{"max-height":"600px"}},{default:t(()=>[e(m,{label:"Game"},{default:t(()=>[e(v,{modelValue:o.gameId,"onUpdate:modelValue":a[0]||(a[0]=l=>o.gameId=l),placeholder:"please select your game",onChange:g},{default:t(()=>[(n(!0),y(E,null,T(i.value,l=>(n(),f(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"Army Type"},{default:t(()=>[e(v,{modelValue:o.armyTypeId,"onUpdate:modelValue":a[1]||(a[1]=l=>o.armyTypeId=l),placeholder:"please select your army type"},{default:t(()=>[(n(!0),y(E,null,T(p.value,l=>(n(),f(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"Army Name"},{default:t(()=>[e(V,{modelValue:o.name,"onUpdate:modelValue":a[2]||(a[2]=l=>o.name=l)},null,8,["modelValue"])]),_:1}),e(m,{label:"Max Points"},{default:t(()=>[e(V,{modelValue:o.points,"onUpdate:modelValue":a[3]||(a[3]=l=>o.points=l),type:"number"},null,8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(w,{type:"primary",onClick:U},{default:t(()=>[u("Create")]),_:1}),e(w,null,{default:t(()=>[u("Cancel")]),_:1})]),_:1})]),_:1},8,["model"])),[[F,K(c)]])]),_:1})]),_:1}),e(_,{span:4})]),_:1})])}}});export{Ie as default};
