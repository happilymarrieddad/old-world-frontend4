import{f as F,z as R,u as D,A as L,s as j,r as _,B as H,g as q,j as n,o as d,c as A,a as e,w as t,d as l,i as h,C as z,h as J,y as w,p as K,q as O,b as E,e as P,E as G,D as Q,x as W,H as X,I as Y,J as Z,K as ee,L as te,v as ae,t as oe}from"./index-CuHrO1UT.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                           */import{u as se}from"./unitTypes-bP-PZcfW.js";import{u as re}from"./userArmies-D3pO84eT.js";import"./types_pb-D0t3hVCi.js";import"./timestamp_pb-B3iL3wgR.js";const ne={class:"user-armies-add-unit"},le=E("br",null,null,-1),ie=E("br",null,null,-1),we=F({__name:"AddUnitView",setup(ue){const i=R(),u=D(),T=se(),y=re(),U=L(),{loading:p}=j(u),f=_([]),g=_(""),b=_(""),m=H({unit_type_id:""});async function x(){n.info("Attempting to add a unit to an army..."),p.value=!0;const s=await y.addUnitToUserArmy(i.params.id,m.unit_type_id);if(p.value=!1,s){n.error(s);return}n.success("Successfully added unit to army"),U.push({path:`/user-armies/edit/${i.params.id}`})}async function S(){u.loading=!0;const[s,o]=await T.getUnitTypeNamesFromArmyTypeId(b.value);if(o){n.error(o);return}f.value=s,u.loading=!1}return q(async()=>{u.loading=!0;const[s,o]=await y.getUserArmy(i.params.id);if(o){n.error(o);return}const r=s;g.value=r.name,b.value=r.armyTypeId,await S()}),(s,o)=>{const r=P,B=G,c=Q,V=oe,C=W,v=X,I=Y,N=Z,$=ee,k=te,M=ae;return d(),A("div",ne,[e(B,{separator:"/"},{default:t(()=>[e(r,{to:{path:"/"}},{default:t(()=>[l("Homepage")]),_:1}),e(r,{to:{path:"/user-armies"}},{default:t(()=>[l("User Armies")]),_:1}),e(r,{to:{path:`/user-armies/edit/${h(i).params.id}`}},{default:t(()=>[l(z(g.value),1)]),_:1},8,["to"]),e(r,null,{default:t(()=>[l("Add Unit")]),_:1})]),_:1}),le,ie,e(k,{class:"row-bg",justify:"space-between"},{default:t(()=>[e(c,{span:4}),e(c,{span:10},{default:t(()=>[e($,null,{default:t(()=>[J((d(),w(N,{model:m,"label-width":"auto",style:{"max-height":"600px"}},{default:t(()=>[e(v,{label:"Unit Type"},{default:t(()=>[e(C,{modelValue:m.unit_type_id,"onUpdate:modelValue":o[0]||(o[0]=a=>m.unit_type_id=a),placeholder:"please select your unit type"},{default:t(()=>[(d(!0),A(K,null,O(f.value,a=>(d(),w(V,{key:a.id,label:`${a.compositionTypeName} - ${a.name} - (${a.pointsPerModel}pts${a.maxModels>1?" per model (min:"+a.minModels+")":""})`,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:t(()=>[e(I,{type:"primary",onClick:x},{default:t(()=>[l("Add")]),_:1})]),_:1})]),_:1},8,["model"])),[[M,h(p)]])]),_:1})]),_:1}),e(c,{span:4})]),_:1})])}}});export{we as default};
