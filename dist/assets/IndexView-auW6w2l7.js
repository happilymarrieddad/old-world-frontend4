import{g as H,u as P,s as K,i as n,F as _,a as e,j as x,k as M,d as r,Y as F,l as f,m as L,o as u,c as g,b as k,w as o,C as E,q as O,n as $,t as v,e as j,D as q,G as Y,E as J,y as Q,z as W,A as X,H as S}from"./index-DBH5ZCFA.js";/* empty css                   *//* empty css                *//* empty css                     *//* empty css                           *//* empty css                 *//* empty css                  */import{u as Z}from"./games-BSZfg_CZ.js";import{u as ee}from"./armyTypes-yLY91mvk.js";import{u as te}from"./unitTypes-BBizRWFm.js";import"./timestamp_pb-hl9xnwuy.js";import"./types_pb-5n_e-kCd.js";const ae={class:"unit-type-index"},le={class:"troop-types"},oe={style:{height:"1000px"}},ve=H({__name:"IndexView",setup(se){const s=P(),V=Z(),D=ee(),C=te(),{loading:G}=K(s),d=n([]),p=n([]),h=n([]),m=n(""),c=n(""),I=n([{key:"name",dataKey:"name",width:500,title:"Name"},{key:"compositionTypeName",dataKey:"compositionTypeName",width:200,title:"Composition Type",fixed:_.RIGHT},{key:"pointsPerModel",dataKey:"pointsPerModel",width:100,title:"Pts per model",fixed:_.RIGHT},{dataKey:"id",width:200,fixed:_.RIGHT,title:"Options",cellRenderer:l=>e(f,null,[e(x,{underline:!1,icon:M,href:`/unit-types/edit/${l.cellData}`},{default:()=>[r("Edit")]}),e(x,{style:"padding-left:10px",underline:!1,icon:F,href:`/unit-types/destroy/${l.cellData}`},{default:()=>[r("Delete")]})])}]);async function N(){s.loading=!0;const[l,,t]=await V.getGames(1e3,0);if(t){v.error(t);return}d.value=l,d.value.length>0&&(m.value=d.value[0].id),s.loading=!1}async function T(){s.loading=!0;const[l,,t]=await D.getArmyTypes(m.value,1e3,0);if(t){v.error(t);return}p.value=l,p.value.length>0&&(c.value=p.value[0].id),s.loading=!1}async function w(){s.loading=!0;const[l,,t]=await C.getUnitTypes(c.value,1e3,0);if(t){v.error(t);return}h.value=l,s.loading=!1,console.log(l)}return L(async()=>{await N(),await T(),await w()}),(l,t)=>{const i=j,y=q,b=Y,A=J,B=Q,R=W,U=X;return u(),g("div",ae,[k("div",le,[e(A,{separator:"/"},{default:o(()=>[e(i,{to:{path:"/"}},{default:o(()=>[r("Homepage")]),_:1}),e(i,{to:{path:"/games"}},{default:o(()=>[e(b,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=a),placeholder:"Select",size:"small",style:{"min-width":"200px"},onChange:T},{default:o(()=>[e(y,{key:"",label:"",value:"-- Please select a game --"}),(u(!0),g(f,null,E(d.value,a=>(u(),S(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{to:{path:"/army-types"}},{default:o(()=>[e(b,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),placeholder:"Select",size:"small",style:{"min-width":"200px"},onChange:w},{default:o(()=>[e(y,{key:"",label:"",value:"-- Please select an army type --"}),(u(!0),g(f,null,E(p.value,a=>(u(),S(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:o(()=>[r("Unit Types")]),_:1}),e(i,{to:{path:"/unit-types/create"}},{default:o(()=>[r("Create New")]),_:1})]),_:1})]),k("div",oe,[e(R,null,{default:o(({height:a,width:z})=>[O(e(B,{columns:I.value,data:h.value,width:z,height:a,fixed:""},null,8,["columns","data","width","height"]),[[U,$(G)]])]),_:1})])])}}});export{ve as default};
