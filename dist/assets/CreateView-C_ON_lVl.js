import{f as M,u as R,A as j,s as H,r as E,B as $,g as q,o as n,c as f,a as e,w as t,d,h as J,i as K,y as g,p as A,q as T,b as h,j as i,e as O,E as P,D as z,x as Q,H as W,G as X,I as Y,J as Z,K as ee,L as ae,v as te,t as oe}from"./index-CuHrO1UT.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                           */import{u as le}from"./userArmies-D3pO84eT.js";import{u as re}from"./games-C5MyWv6x.js";import{u as se}from"./armyTypes-DYqyAicj.js";import"./types_pb-D0t3hVCi.js";import"./timestamp_pb-B3iL3wgR.js";const ne={class:"user-armies-create"},me=h("br",null,null,-1),ue=h("br",null,null,-1),Ae=M({__name:"CreateView",setup(de){const m=R(),C=re(),S=se(),x=le(),B=j(),{loading:_}=H(m),p=E([]),c=E([]),o=$({gameId:"",armyTypeId:"",name:"",points:0});async function U(){i.info("Attempting to create an army..."),_.value=!0;const[r,a]=await x.createUserArmy(o.name,o.gameId,o.armyTypeId,o.points);if(_.value=!1,a){i.error(a);return}const s=r;i.success(`Successfully created army '${s.name}'. Navigating to army edit page`),B.push({path:`/user-armies/edit/${s.id}`})}async function k(){m.loading=!0;const[r,,a]=await C.getGames(500,0);if(a){i.error(a);return}p.value=r,p.value.length>0&&(o.gameId=p.value[0].id),m.loading=!1}async function b(){m.loading=!0;const[r,,a]=await S.getArmyTypes(o.gameId,500,0);if(a){i.error(a);return}c.value=r,c.value.length>0&&(o.armyTypeId=c.value[0].id),m.loading=!1}return q(async()=>{await k(),await b()}),(r,a)=>{const s=O,G=P,y=z,v=oe,V=Q,u=W,w=X,I=Y,N=Z,D=ee,F=ae,L=te;return n(),f("div",ne,[e(G,{separator:"/"},{default:t(()=>[e(s,{to:{path:"/"}},{default:t(()=>[d("Homepage")]),_:1}),e(s,{to:{path:"/user-armies"}},{default:t(()=>[d("User Armies")]),_:1}),e(s,null,{default:t(()=>[d("Create new army")]),_:1})]),_:1}),me,ue,e(F,{class:"row-bg",justify:"space-between"},{default:t(()=>[e(y,{span:4}),e(y,{span:10},{default:t(()=>[e(D,null,{default:t(()=>[J((n(),g(N,{model:o,"label-width":"auto",style:{"max-height":"600px"}},{default:t(()=>[e(u,{label:"Game"},{default:t(()=>[e(V,{modelValue:o.gameId,"onUpdate:modelValue":a[0]||(a[0]=l=>o.gameId=l),placeholder:"please select your game",onChange:b},{default:t(()=>[(n(!0),f(A,null,T(p.value,l=>(n(),g(v,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"Army Type"},{default:t(()=>[e(V,{modelValue:o.armyTypeId,"onUpdate:modelValue":a[1]||(a[1]=l=>o.armyTypeId=l),placeholder:"please select your army type"},{default:t(()=>[(n(!0),f(A,null,T(c.value,l=>(n(),g(v,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"Army Name"},{default:t(()=>[e(w,{modelValue:o.name,"onUpdate:modelValue":a[2]||(a[2]=l=>o.name=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"Max Points"},{default:t(()=>[e(w,{modelValue:o.points,"onUpdate:modelValue":a[3]||(a[3]=l=>o.points=l),type:"number"},null,8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(I,{type:"primary",onClick:U},{default:t(()=>[d("Create")]),_:1}),e(I,null,{default:t(()=>[d("Cancel")]),_:1})]),_:1})]),_:1},8,["model"])),[[L,K(_)]])]),_:1})]),_:1}),e(y,{span:4})]),_:1})])}}});export{Ae as default};
