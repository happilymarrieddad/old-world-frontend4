import{f as M,u as R,A as j,s as H,r as E,B as $,g as q,o as n,c as f,a as e,w as t,d,h as J,i as K,y as g,p as A,q as T,b as h,j as i,e as O,E as P,D as z,x as Q,H as W,G as X,I as Y,J as Z,K as ee,L as ae,v as te,t as le}from"./index-YON7duyJ.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                           */import{u as oe}from"./userArmies-BIRJ803a.js";import{u as re}from"./games-CYCicrr1.js";import{u as se}from"./armyTypes-D9tcWXzD.js";import"./timestamp_pb-CBs1K3Pj.js";const ne={class:"user-armies-create"},ue=h("br",null,null,-1),me=h("br",null,null,-1),Ee=M({__name:"CreateView",setup(de){const u=R(),C=re(),S=se(),x=oe(),B=j(),{loading:_}=H(u),p=E([]),c=E([]),l=$({gameId:"",armyTypeId:"",name:"",points:0});async function U(){i.info("Attempting to create an army..."),_.value=!0;const[r,a]=await x.createUserArmy(l.name,l.gameId,l.armyTypeId,l.points);if(_.value=!1,a){i.error(a);return}const s=r;i.success(`Successfully created army '${s.name}'. Navigating to army edit page`),B.push({path:`/user-armies/edit/${s.id}`})}async function k(){u.loading=!0;const[r,,a]=await C.getGames(500,0);if(a){i.error(a);return}p.value=r,p.value.length>0&&(l.gameId=p.value[0].id),u.loading=!1}async function b(){u.loading=!0;const[r,,a]=await S.getArmyTypes(l.gameId,500,0);if(a){i.error(a);return}c.value=r,c.value.length>0&&(l.armyTypeId=c.value[0].id),u.loading=!1}return q(async()=>{await k(),await b()}),(r,a)=>{const s=O,G=P,y=z,v=le,V=Q,m=W,w=X,I=Y,N=Z,D=ee,F=ae,L=te;return n(),f("div",ne,[e(G,{separator:"/"},{default:t(()=>[e(s,{to:{path:"/"}},{default:t(()=>[d("Homepage")]),_:1}),e(s,{to:{path:"/user-armies"}},{default:t(()=>[d("User Armies")]),_:1}),e(s,null,{default:t(()=>[d("Create new army")]),_:1})]),_:1}),ue,me,e(F,{class:"row-bg",justify:"space-between"},{default:t(()=>[e(y,{span:4}),e(y,{span:10},{default:t(()=>[e(D,null,{default:t(()=>[J((n(),g(N,{model:l,"label-width":"auto",style:{"max-height":"600px"}},{default:t(()=>[e(m,{label:"Game"},{default:t(()=>[e(V,{modelValue:l.gameId,"onUpdate:modelValue":a[0]||(a[0]=o=>l.gameId=o),placeholder:"please select your game",onChange:b},{default:t(()=>[(n(!0),f(A,null,T(p.value,o=>(n(),g(v,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"Army Type"},{default:t(()=>[e(V,{modelValue:l.armyTypeId,"onUpdate:modelValue":a[1]||(a[1]=o=>l.armyTypeId=o),placeholder:"please select your army type"},{default:t(()=>[(n(!0),f(A,null,T(c.value,o=>(n(),g(v,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"Army Name"},{default:t(()=>[e(w,{modelValue:l.name,"onUpdate:modelValue":a[2]||(a[2]=o=>l.name=o)},null,8,["modelValue"])]),_:1}),e(m,{label:"Max Points"},{default:t(()=>[e(w,{modelValue:l.points,"onUpdate:modelValue":a[3]||(a[3]=o=>l.points=o),type:"number"},null,8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(I,{type:"primary",onClick:U},{default:t(()=>[d("Create")]),_:1}),e(I,null,{default:t(()=>[d("Cancel")]),_:1})]),_:1})]),_:1},8,["model"])),[[L,K(_)]])]),_:1})]),_:1}),e(y,{span:4})]),_:1})])}}});export{Ee as default};
