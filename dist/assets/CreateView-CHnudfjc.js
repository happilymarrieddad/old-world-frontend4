import{g as L,u as R,h as H,s as O,i as E,J as P,m as $,o as s,c as f,a as e,w as o,d,q as j,n as q,H as g,l as T,C as A,b as h,t as i,e as J,E as Q,L as z,G as K,N as W,M as X,x as Y,O as Z,P as ee,Q as ae,A as te,D as oe}from"./index-J7TsvYTq.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                           */import{u as le}from"./userArmies-QQdmKWLS.js";import{u as re}from"./games-D45vqApO.js";import{u as ne}from"./armyTypes-e6Y77cU3.js";import"./types_pb-DdFPuZq9.js";import"./timestamp_pb-Lo3uUtcO.js";const se={class:"user-armies-create"},me=h("br",null,null,-1),ue=h("br",null,null,-1),Ae=L({__name:"CreateView",setup(de){const m=R(),C=re(),S=ne(),x=le(),B=H(),{loading:_}=O(m),p=E([]),c=E([]),a=P({gameId:"",armyTypeId:"",name:"",points:0});async function U(){i.info("Attempting to create an army..."),_.value=!0;const[r,t]=await x.createUserArmy(a.name,a.gameId,a.armyTypeId,a.points);if(_.value=!1,t){i.error(t);return}const n=r;i.success(`Successfully created army '${n.name}'. Navigating to army edit page`),B.push({path:`/user-armies/edit/${n.id}`})}async function k(){m.loading=!0;const[r,,t]=await C.getGames(500,0);if(t){i.error(t);return}p.value=r,p.value.length>0&&(a.gameId=p.value[0].id),m.loading=!1}async function b(){m.loading=!0,a.armyTypeId="";const[r,,t]=await S.getArmyTypes(a.gameId,500,0);if(t){i.error(t);return}c.value=r,c.value.length>0&&(a.armyTypeId=c.value[0].id),m.loading=!1}return $(async()=>{await k(),await b()}),(r,t)=>{const n=J,N=Q,y=z,v=oe,V=K,u=W,w=X,I=Y,G=Z,D=ee,M=ae,F=te;return s(),f("div",se,[e(N,{separator:"/"},{default:o(()=>[e(n,{to:{path:"/"}},{default:o(()=>[d("Homepage")]),_:1}),e(n,{to:{path:"/user-armies"}},{default:o(()=>[d("User Armies")]),_:1}),e(n,null,{default:o(()=>[d("Create new army")]),_:1})]),_:1}),me,ue,e(M,{class:"row-bg",justify:"space-between"},{default:o(()=>[e(y,{span:4}),e(y,{span:10},{default:o(()=>[e(D,null,{default:o(()=>[j((s(),g(G,{model:a,"label-width":"auto",style:{"max-height":"600px"}},{default:o(()=>[e(u,{label:"Game"},{default:o(()=>[e(V,{modelValue:a.gameId,"onUpdate:modelValue":t[0]||(t[0]=l=>a.gameId=l),placeholder:"please select your game",onChange:b},{default:o(()=>[(s(!0),f(T,null,A(p.value,l=>(s(),g(v,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"Army Type"},{default:o(()=>[e(V,{modelValue:a.armyTypeId,"onUpdate:modelValue":t[1]||(t[1]=l=>a.armyTypeId=l),placeholder:"please select your army type"},{default:o(()=>[(s(!0),f(T,null,A(c.value,l=>(s(),g(v,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"Army Name"},{default:o(()=>[e(w,{modelValue:a.name,"onUpdate:modelValue":t[2]||(t[2]=l=>a.name=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"Max Points"},{default:o(()=>[e(w,{modelValue:a.points,"onUpdate:modelValue":t[3]||(t[3]=l=>a.points=l),type:"number"},null,8,["modelValue"])]),_:1}),e(u,null,{default:o(()=>[e(I,{type:"primary",onClick:U},{default:o(()=>[d("Create")]),_:1}),e(I,null,{default:o(()=>[d("Cancel")]),_:1})]),_:1})]),_:1},8,["model"])),[[F,q(_)]])]),_:1})]),_:1}),e(y,{span:4})]),_:1})])}}});export{Ae as default};
