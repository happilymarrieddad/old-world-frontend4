import{f as L,u as R,C as j,s as H,r as E,D as $,g as z,o as n,c as f,a as e,w as o,d,i as J,h as K,A as g,t as T,x as A,b as h,j as i,e as O,E as P,H as q,z as Q,J as W,I as X,K as Y,L as Z,M as ee,N as ae,v as te,y as oe}from"./index-BPptFwra.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                           */import{u as le}from"./userArmies-C0BBMqvF.js";import{u as re}from"./games-2tesK-Co.js";import{u as se}from"./armyTypes-BEJ8nTwR.js";import"./types_pb-0CTnGIvc.js";import"./timestamp_pb-YH_wUWDP.js";const ne={class:"user-armies-create"},me=h("br",null,null,-1),ue=h("br",null,null,-1),Te=L({__name:"CreateView",setup(de){const m=R(),C=re(),S=se(),x=le(),B=j(),{loading:_}=H(m),p=E([]),c=E([]),a=$({gameId:"",armyTypeId:"",name:"",points:0});async function U(){i.info("Attempting to create an army..."),_.value=!0;const[r,t]=await x.createUserArmy(a.name,a.gameId,a.armyTypeId,a.points);if(_.value=!1,t){i.error(t);return}const s=r;i.success(`Successfully created army '${s.name}'. Navigating to army edit page`),B.push({path:`/user-armies/edit/${s.id}`})}async function k(){m.loading=!0;const[r,,t]=await C.getGames(500,0);if(t){i.error(t);return}p.value=r,p.value.length>0&&(a.gameId=p.value[0].id),m.loading=!1}async function b(){m.loading=!0,a.armyTypeId="";const[r,,t]=await S.getArmyTypes(a.gameId,500,0);if(t){i.error(t);return}c.value=r,c.value.length>0&&(a.armyTypeId=c.value[0].id),m.loading=!1}return z(async()=>{await k(),await b()}),(r,t)=>{const s=O,N=P,y=q,v=oe,I=Q,u=W,V=X,w=Y,D=Z,G=ee,M=ae,F=te;return n(),f("div",ne,[e(N,{separator:"/"},{default:o(()=>[e(s,{to:{path:"/"}},{default:o(()=>[d("Homepage")]),_:1}),e(s,{to:{path:"/user-armies"}},{default:o(()=>[d("User Armies")]),_:1}),e(s,null,{default:o(()=>[d("Create new army")]),_:1})]),_:1}),me,ue,e(M,{class:"row-bg",justify:"space-between"},{default:o(()=>[e(y,{span:4}),e(y,{span:10},{default:o(()=>[e(G,null,{default:o(()=>[J((n(),g(D,{model:a,"label-width":"auto",style:{"max-height":"600px"}},{default:o(()=>[e(u,{label:"Game"},{default:o(()=>[e(I,{modelValue:a.gameId,"onUpdate:modelValue":t[0]||(t[0]=l=>a.gameId=l),placeholder:"please select your game",onChange:b},{default:o(()=>[(n(!0),f(T,null,A(p.value,l=>(n(),g(v,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"Army Type"},{default:o(()=>[e(I,{modelValue:a.armyTypeId,"onUpdate:modelValue":t[1]||(t[1]=l=>a.armyTypeId=l),placeholder:"please select your army type"},{default:o(()=>[(n(!0),f(T,null,A(c.value,l=>(n(),g(v,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"Army Name"},{default:o(()=>[e(V,{modelValue:a.name,"onUpdate:modelValue":t[2]||(t[2]=l=>a.name=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"Max Points"},{default:o(()=>[e(V,{modelValue:a.points,"onUpdate:modelValue":t[3]||(t[3]=l=>a.points=l),type:"number"},null,8,["modelValue"])]),_:1}),e(u,null,{default:o(()=>[e(w,{type:"primary",onClick:U},{default:o(()=>[d("Create")]),_:1}),e(w,null,{default:o(()=>[d("Cancel")]),_:1})]),_:1})]),_:1},8,["model"])),[[F,K(_)]])]),_:1})]),_:1}),e(y,{span:4})]),_:1})])}}});export{Te as default};
