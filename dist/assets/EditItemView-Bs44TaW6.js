import{f as T,u as U,B as N,C as k,s as D,r as M,D as R,g as j,o as g,c as A,a as t,w as o,d as r,G as F,i as H,h as L,A as G,V as I,b as V,j as c,e as J,E as K,H as P,I as $,J as q,K as z,L as O,M as Q,N as W,v as X}from"./index-BPptFwra.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                 *//* empty css                           */import{u as Y,U as Z}from"./items-BrmfJnCq.js";import"./timestamp_pb-YH_wUWDP.js";const ee={class:"items-edit"},te=V("br",null,null,-1),oe=V("br",null,null,-1),ue=T({__name:"EditItemView",setup(ae){const d=U(),_=Y(),p=N(),w=k(),{loading:E}=D(d),f=M("/games"),e=R({name:"",armyTypeId:"",points:0,description:"",story:""}),v=async function(){const m=new Z({id:p.params.id,name:e.name,points:BigInt(e.points),description:e.description,story:e.story}),a=await _.updateItem(m);if(a){c.error(a);return}c.success("successfully updated item"),w.push(`${f.value}/items`)};async function y(){d.loading=!0;const[m,a]=await _.getItem(p.params.gameid,p.params.id);if(a){c.error(a);return}const s=m;e.name=s.name,e.armyTypeId=s.armyTypeId,e.points=Number(s.points),e.description=s.description,e.story=s.story,e.armyTypeId.length>0&&(f.value="/army-types"),d.loading=!1}return j(async()=>{await y()}),(m,a)=>{const s=J,B=K,u=P,i=$,l=q,b=z,h=O,x=Q,C=W,S=X;return g(),A("div",ee,[t(B,{separator:"/"},{default:o(()=>[t(s,{to:{path:"/"}},{default:o(()=>[r("Homepage")]),_:1}),t(s,{to:{path:"/items"}},{default:o(()=>[r("Items")]),_:1}),t(s,null,{default:o(()=>[r(F(e.name),1)]),_:1})]),_:1}),te,oe,t(C,{class:"row-bg",justify:"space-between"},{default:o(()=>[t(u,{span:4}),t(u,{span:10},{default:o(()=>[t(x,null,{default:o(()=>[H((g(),G(h,{model:e,"label-width":"auto",style:{"max-height":"600px"}},{default:o(()=>[t(l,{label:"Item Name"},{default:o(()=>[t(i,{modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=n=>e.name=n)},null,8,["modelValue"])]),_:1}),t(l,{label:"Points"},{default:o(()=>[t(i,{modelValue:e.points,"onUpdate:modelValue":a[1]||(a[1]=n=>e.points=n),type:"number",min:"0"},null,8,["modelValue"])]),_:1}),t(l,{label:"Description"},{default:o(()=>[t(i,{modelValue:e.description,"onUpdate:modelValue":a[2]||(a[2]=n=>e.description=n),rows:2,type:"textarea"},null,8,["modelValue"])]),_:1}),t(l,{label:"Story"},{default:o(()=>[t(i,{modelValue:e.story,"onUpdate:modelValue":a[3]||(a[3]=n=>e.story=n),rows:4,type:"textarea"},null,8,["modelValue"])]),_:1}),t(l,null,{default:o(()=>[t(b,{type:"primary",onClick:I(v,["prevent"])},{default:o(()=>[r("Save")]),_:1}),t(b,{onClick:I(y,["prevent"])},{default:o(()=>[r("Cancel")]),_:1})]),_:1})]),_:1},8,["model"])),[[S,L(E)]])]),_:1})]),_:1}),t(u,{span:4})]),_:1})])}}});export{ue as default};
