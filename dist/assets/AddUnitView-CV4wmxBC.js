import{f as F,B as R,u as D,C as L,s as j,r as _,D as H,g as z,j as n,o as d,c as A,a as e,w as t,d as l,h,G,i as J,A as w,t as K,x as O,b as E,e as P,E as q,H as Q,z as W,J as X,K as Y,L as Z,M as ee,N as te,v as ae,y as oe}from"./index-BPptFwra.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                           */import{u as se}from"./unitTypes-CXXUW_P4.js";import{u as re}from"./userArmies-C0BBMqvF.js";import"./types_pb-0CTnGIvc.js";import"./timestamp_pb-YH_wUWDP.js";const ne={class:"user-armies-add-unit"},le=E("br",null,null,-1),ie=E("br",null,null,-1),we=F({__name:"AddUnitView",setup(ue){const i=R(),u=D(),T=se(),y=re(),U=L(),{loading:p}=j(u),f=_([]),g=_(""),b=_(""),m=H({unit_type_id:""});async function x(){n.info("Attempting to add a unit to an army..."),p.value=!0;const s=await y.addUnitToUserArmy(i.params.id,m.unit_type_id);if(p.value=!1,s){n.error(s);return}n.success("Successfully added unit to army"),U.push({path:`/user-armies/edit/${i.params.id}`})}async function S(){u.loading=!0;const[s,o]=await T.getUnitTypeNamesFromArmyTypeId(b.value);if(o){n.error(o);return}f.value=s,u.loading=!1}return z(async()=>{u.loading=!0;const[s,o]=await y.getUserArmy(i.params.id);if(o){n.error(o);return}const r=s;g.value=r.name,b.value=r.armyTypeId,await S()}),(s,o)=>{const r=P,B=q,c=Q,N=oe,V=W,v=X,C=Y,M=Z,$=ee,k=te,I=ae;return d(),A("div",ne,[e(B,{separator:"/"},{default:t(()=>[e(r,{to:{path:"/"}},{default:t(()=>[l("Homepage")]),_:1}),e(r,{to:{path:"/user-armies"}},{default:t(()=>[l("User Armies")]),_:1}),e(r,{to:{path:`/user-armies/edit/${h(i).params.id}`}},{default:t(()=>[l(G(g.value),1)]),_:1},8,["to"]),e(r,null,{default:t(()=>[l("Add Unit")]),_:1})]),_:1}),le,ie,e(k,{class:"row-bg",justify:"space-between"},{default:t(()=>[e(c,{span:4}),e(c,{span:10},{default:t(()=>[e($,null,{default:t(()=>[J((d(),w(M,{model:m,"label-width":"auto",style:{"max-height":"600px"}},{default:t(()=>[e(v,{label:"Unit Type"},{default:t(()=>[e(V,{modelValue:m.unit_type_id,"onUpdate:modelValue":o[0]||(o[0]=a=>m.unit_type_id=a),placeholder:"please select your unit type"},{default:t(()=>[(d(!0),A(K,null,O(f.value,a=>(d(),w(N,{key:a.id,label:`${a.compositionTypeName} - ${a.name} - (${a.pointsPerModel}pts${a.maxModels>1?" per model (min:"+a.minModels+")":""})`,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:t(()=>[e(C,{type:"primary",onClick:x},{default:t(()=>[l("Add")]),_:1})]),_:1})]),_:1},8,["model"])),[[I,h(p)]])]),_:1})]),_:1}),e(c,{span:4})]),_:1})])}}});export{we as default};
